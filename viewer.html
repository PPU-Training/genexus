<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Markdown Viewer</title>

        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/github-markdown-css@5/github-markdown.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/highlight.js@11/styles/github.min.css"
        />

        <style>
            body {
                margin: 0;
                padding: 40px;
                background: #f6f8fa;
                color: #000;
                font-family:
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    sans-serif;
            }
            .markdown-body {
                max-width: 900px;
                color: #000;
                margin: auto;
                background: white;
                padding: 40px;
                border-radius: 8px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            }
        </style>
    </head>

    <body>
        <article id="content" class="markdown-body"></article>

        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/highlight.js@11/highlight.min.js"></script>

        <script>
            const params = new URLSearchParams(window.location.search);
            const file =
                params.get("file") ||
                "https://ppu-training.github.io/genexus/docs/getting-started/requirements.md";

            fetch(file)
                .then((res) => {
                    if (!res.ok) throw new Error("Not found");
                    return res.text();
                })
                .then((md) => {
                    marked.setOptions({
                        highlight(code, lang) {
                            if (lang && hljs.getLanguage(lang)) {
                                return hljs.highlight(code, { language: lang })
                                    .value;
                            }
                            return hljs.highlightAuto(code).value;
                        },
                    });

                    document.getElementById("content").innerHTML =
                        marked.parse(md);
                })
                .catch((err) => {
                    document.getElementById("content").innerHTML =
                        "<h2>Failed to load markdown</h2><p>" +
                        err.message +
                        "</p>";
                });
        </script>
    </body>
</html>
